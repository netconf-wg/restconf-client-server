<?xml version='1.0'?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY rfc2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY rfc3688 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3688.xml">
<!ENTITY rfc5246 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5246.xml">
<!ENTITY rfc6020 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6020.xml">
<!ENTITY rfc6335 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6335.xml">
<!ENTITY rfc6991 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6991.xml">
<!ENTITY rfc7407 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7407.xml">
]>

<?rfc toc="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<?rfc linkmailto="no" ?>
<?rfc editing="no" ?>
<?rfc comments="yes" ?>
<?rfc inline="yes"?>
<?rfc rfcedstyle="yes"?>
<?rfc-ext allow-markup-in-artwork="yes" ?>
<?rfc-ext include-index="no" ?>
<!--<?rfc strict="no"?> -->

<rfc category="std"
     ipr="trust200902"
     docName="draft-ietf-netconf-restconf-client-server-latest" >
    <front>
        <title>RESTCONF Client and Server Models</title>
        <author initials="K.W." surname="Watsen" fullname="Kent Watsen">
            <organization>Juniper Networks</organization>
            <address>
                <email>kwatsen@juniper.net</email>
            </address>
        </author>
        <author initials="J.S." surname="Schoenwaelder" fullname="Juergen Schoenwaelder">
            <organization>Jacobs University Bremen</organization>
            <address>
                <email>j.schoenwaelder@jacobs-university.de</email>
            </address>
        </author>
        <date/>
        <area>Operations</area>
        <workgroup>NETCONF Working Group</workgroup>
        <abstract>
            <t>This document defines two YANG modules,
            one module to configure a RESTCONF client and the other module to
            configure a RESTCONF server.  Both modules support the TLS transport
            protocol with both standard RESTCONF and RESTCONF Call Home connections.</t>

        </abstract>
        <note title="Editorial Note (To be removed by RFC Editor)">
          <t>This draft contains many placeholder values that need to be replaced
          with finalized values at the time of publication.  This note summarizes
          all of the substitutions that are needed.  No other RFC Editor
          instructions are specified elsewhere in this document.</t>

          <t>This document contains references to other drafts in progress, both in
          the Normative References section, as well as in body text throughout.  
          Please update the following references to reflect their final RFC assignments:
            <list style="symbols">
              <t>draft-ietf-netconf-keystore</t>
              <t>draft-ietf-netconf-tls-client-server</t>
            </list>
          </t>
          <t>Artwork in this document contains shorthand references to drafts in 
          progress.  Please apply the following replacements:
            <list  style="symbols">
              <t><spanx style="verb">XXXX</spanx> --&gt; the assigned RFC value for this draft</t>
              <t><spanx style="verb">YYYY</spanx> --&gt; the assigned RFC value for draft-ietf-netconf-restconf</t>
              <t><spanx style="verb">ZZZZ</spanx> --&gt; the assigned RFC value for draft-ietf-netconf-tls-client-server</t>
            </list>
          </t>
          <t>Artwork in this document contains placeholder values for the date of publication of this
          draft.  Please apply the following replacement:
            <list  style="symbols">
              <t><spanx style="verb">YYYY-MM-DD</spanx> --&gt; the publication date of this draft</t>
            </list>
          </t>
          <t>The following two Appendix sections are to be removed prior to publication:
            <list  style="symbols">
              <t>Appendix A.  Change Log</t>
              <t>Appendix B.  Open Issues</t>
            </list>
          </t>
        </note>
    </front> <middle>

        <section title="Introduction">

            <t>This document defines two YANG <xref target="RFC6020"/> modules,
            one module to configure a RESTCONF client and the other module to
            configure a RESTCONF server <xref target="draft-ietf-netconf-restconf"/>.
            Both modules support the TLS <xref target="RFC5246"/> transport
            protocol with both standard RESTCONF and RESTCONF Call Home connections
            <xref target="draft-ietf-netconf-call-home"/>.</t>

            <section title="Terminology">
              <t>The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL",
              "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
              and "OPTIONAL" in this document are to be interpreted as
              described in RFC 2119 <xref target="RFC2119"/>.</t>
            </section>

            <section title="Tree Diagrams" anchor="tree-diagrams">
            <t>A simplified graphical representation of the data models
            is used in this document.  The meaning of the symbols in
            these diagrams is as follows:
              <list style="symbols">
                <t>Brackets "[" and "]" enclose list keys.</t>
                <t>Braces "{" and "}" enclose feature names, and indicate
                that the named feature must be present for the subtree
                to be present.</t>
                <t>Abbreviations before data node names: "rw" means
                configuration (read-write) and "ro" state data 
                (read-only).</t>
                <t>Symbols after data node names: "?" means an optional
                node, "!" means a presence container, and "*" denotes a
                list and leaf-list.</t>
                <t>Parentheses enclose choice and case nodes, and case
                nodes are also marked with a colon (":").</t>
                <t>Ellipsis ("...") stands for contents of subtrees that
                are not shown.</t>
              </list>
            </t>
            </section>
        </section>

        <section title="The RESTCONF Client Model">
        <t>EDITOR NOTE: Please ignore this section, it is incomplete.</t>

        <t>The RESTCONF client model presented in this section supports both clients
        initiating connections to servers, as well as clients listening
        for connections from servers calling home.</t>

        <t>This model supports both TLS transport protocols using the TLS client
        groupings defined in <xref target="draft-ietf-netconf-tls-client-server"/>.</t>

        <t>All private keys and trusted certificates are held in the
        keystore model defined in <xref target="draft-ietf-netconf-keystore"/>.</t>

        <t>YANG feature statements are used to enable implementations to advertise
        which parts of the model the RESTCONF client supports.</t>

        <section title="Tree Diagram">
          <t>Note: all lines are folded at column 71 with no '\' character.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ietf-restconf-client-tree.txt)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="Example Usage">
          <t>The following example illustrates configuring a RESTCONF
          client to initiate connections, as well as listening for call-home
          connections.</t>
          <t>This example is consistent with the examples presented in
          Section 2.2 of <xref target="draft-ietf-netconf-keystore"/>.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ex-restconf-client.xml)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="YANG Model" anchor="ietf-restconf-client-module">
          <t>This YANG module imports YANG types from <xref
          target="RFC6991"/> and <xref target="RFC7407"/>.</t>
          <t>
            <figure>
              <artwork><![CDATA[

<CODE BEGINS> file "ietf-restconf-client@YYYY-MM-DD.yang"

INSERT_TEXT_FROM_FILE(ietf-restconf-client@YYYY-MM-DD.yang)

<CODE ENDS>
]]></artwork>
            </figure>
          </t>
        </section>
      </section>

      <section title="The RESTCONF Server Model">
        <t>The RESTCONF Server model presented in this section supports servers
        both listening for connections as well as initiating call-home
        connections.</t>

        <t>This model supports the TLS using the TLS server groupings defined in
        <xref target="draft-ietf-netconf-tls-client-server"/>.</t>

        <t>All private keys and trusted certificates are held in the
        keystore model defined in <xref target="draft-ietf-netconf-keystore"/>.</t>

        <t>YANG feature statements are used to enable implementations to advertise
        which parts of the model the RESTCONF server supports.</t>

        <section title="Tree Diagram">
          <t>Note: all lines are folded at column 71 with no '\' character.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ietf-restconf-server-tree.txt)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="Example Usage">
          <t>The following example illustrates configuring a RESTCONF server
          to listen for RESTCONF client connections, as well as configuring
          call-home to one RESTCONF client.</t>

          <t>This example is consistent with the examples presented in
          Section 2.2 of <xref target="draft-ietf-netconf-keystore"/>.</t>

          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ex-restconf-server.xml)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="YANG Model" anchor="restconf-yang-module">
          <t>This YANG module imports YANG types from <xref
          target="RFC6991"/> and <xref target="RFC7407"/>.</t>
          <t>
            <figure>
              <artwork><![CDATA[

<CODE BEGINS> file "ietf-restconf-server@YYYY-MM-DD.yang"

INSERT_TEXT_FROM_FILE(ietf-restconf-server@YYYY-MM-DD.yang)

<CODE ENDS>
]]></artwork>
            </figure>
          </t>
        </section>
      </section>

      <section title="Security Considerations">
<!--
I removed all the NACM statements in the new modules

            <t>There are a number of data nodes defined in the 
            "ietf-netconf-server" and "ietf-restconf-server" YANG
            modules which are readable and/or writable that may 
            be considered sensitive or vulnerable in some 
            network environments.  Write and read operations to
            these data nodes can have a negative effect on network
            operations.  It is thus important to control write
            and read access to these data nodes.  Below are the 
            data nodes and their sensitivity/vulnerability.</t>

            <t>restconf-server/tls/client-auth/trusted-ca-certs:
            <list style="symbols">
              <t>This container contains certificates that a RESTCONF server
              is to use as trust anchors for authenticating X.509-based
              client certificates.  Write access to this node is
              protected using an nacm:default-deny-write statement.</t>
            </list>
            </t>

            <t>restconf-server/tls/client-auth/trusted-client-certs:
            <list style="symbols">
              <t>This container contains certificates that a RESTCONF server
              is to trust directly when authenticating X.509-based
              client certificates.  Write access to this node is
              protected using an nacm:default-deny-write statement.</t>
            </list>
            </t>
-->
      </section>

      <section title="IANA Considerations">
        <section title="The IETF XML Registry">
          <t>This document registers two URIs in the IETF XML
          registry <xref target="RFC2119"/>.  Following the format in
          <xref target="RFC3688"/>, the following registrations are
          requested:</t>
          <t>
            <figure>
                <artwork><![CDATA[
   URI: urn:ietf:params:xml:ns:yang:ietf-restconf-client
   Registrant Contact: The NETCONF WG of the IETF.
   XML: N/A, the requested URI is an XML namespace.

   URI: urn:ietf:params:xml:ns:yang:ietf-restconf-server
   Registrant Contact: The NETCONF WG of the IETF.
   XML: N/A, the requested URI is an XML namespace.
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="The YANG Module Names Registry">
          <t>This document registers two YANG modules in the
          YANG Module Names registry <xref target="RFC6020"/>.
          Following the format in <xref target="RFC6020"/>, the
          the following registrations are requested:</t>
          <t>
            <figure>
                <artwork><![CDATA[
   name:         ietf-restconf-client
   namespace:    urn:ietf:params:xml:ns:yang:ietf-restconf-client
   prefix:       ncc
   reference:    RFC XXXX

   name:         ietf-restconf-server
   namespace:    urn:ietf:params:xml:ns:yang:ietf-restconf-server
   prefix:       ncs
   reference:    RFC XXXX
]]></artwork>
            </figure>
          </t>
        </section>

      </section>


      <section title="Acknowledgements">
        <t>The authors would like to thank for following for
        lively discussions on list and in the halls (ordered
        by last name): Andy Bierman, Martin Bjorklund, Benoit Claise,
        Mehmet Ersue, David Lamparter, Alan Luchuk, Ladislav Lhotka,
        Radek Krejci, Tom Petch, Phil Shafer, Sean Turner, and
        Bert Wijnen.</t>
       <t>
         Juergen Schoenwaelder and was partly funded by Flamingo, a
         Network of Excellence project (ICT-318488) supported by the
         European Commission under its Seventh Framework Programme.
       </t>
     </section>

    </middle>

    <back>
      <references title="Normative References">
        &rfc2119;
        &rfc6020;
        &rfc6991;
        &rfc7407;

        <reference anchor='draft-ietf-netconf-keystore' target="https://datatracker.ietf.org/html/draft-ieft-netconf-keystore">
          <front>
            <title>Keystore Model</title>
            <author initials='K.W.' surname='Watsen' fullname='Kent Watsen'>
              <organization>Juniper Networks</organization>
            </author>
            <date year='2016' />
          </front>
          <seriesInfo name='Internet-Draft' value='draft-ieft-netconf-keystore-00'/>
        </reference>

        <reference anchor='draft-ietf-netconf-tls-client-server' target="https://datatracker.ietf.org/html/draft-ieft-netconf-tls-client-server">
          <front>
            <title>TLS Client and Server Models</title>
            <author initials='K.W.' surname='Watsen' fullname='Kent Watsen'>
              <organization>Juniper Networks</organization>
            </author>
            <date year='2016' />
           </front>
           <seriesInfo name='Internet-Draft'
                       value='draft-ieft-netconf-tls-client-server-00'/>
        </reference>

        <reference anchor='draft-ietf-netconf-restconf' target="https://datatracker.ietf.org/html/draft-ieft-netconf-restconf">
          <front>
            <title>RESTCONF Protocol</title>
            <author initials='A.B.' surname='Bierman' fullname='Andy Bierman'>
              <organization>YumaWorks</organization>
            </author>
            <author initials='M' surname='Bjorklund' fullname='Martin Bjorklund'>
              <organization>Tail-f Systems</organization>
            </author>
            <author initials='K.W.' surname='Watsen' fullname='Kent Watsen'>
              <organization>Juniper Networks</organization>
            </author>
            <date year='2016' />
          </front>
          <seriesInfo name='Internet-Draft' value='draft-ieft-netconf-restconf-13' />
       </reference>

     </references>

      <references title="Informative References">
        &rfc3688;
        &rfc5246;

        <reference anchor='draft-ietf-netconf-call-home' target="https://datatracker.ietf.org/html/draft-ieft-netconf-call-home-17">
          <front>
            <title>
              NETCONF Call Home and RESTCONF Call Home
            </title>
            <author initials='K.W.' surname='Watsen' fullname='Kent Watsen'>
              <organization>Juniper Networks</organization>
            </author>
            <date year='2015'/>
          </front>
          <seriesInfo name='Internet-Draft' value='draft-ieft-netconf-call-home-17' />
        </reference>

      </references>

     <section title="Change Log">
       <section title="server-model-09 to 00">
         <t>
           <list style="symbols">
             <t>This draft was split out from draft-ietf-netconf-server-model-09.</t>
              <t>Added in new features 'listen' and 'call-home' so future transports
                 can be augmented in.</t>
           </list>
         </t>
       </section>
     </section>

     <section title="Open Issues">
       <t>Please see: https://github.com/netconf-wg/restconf-client-server/issues.</t>
     </section>

   </back>
</rfc>

