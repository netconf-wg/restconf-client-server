<?xml version='1.0'?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">

<?rfc toc="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<?rfc linkmailto="no" ?>
<?rfc editing="no" ?>
<?rfc comments="yes" ?>
<?rfc inline="yes"?>
<?rfc rfcedstyle="yes"?>
<?rfc-ext allow-markup-in-artwork="yes" ?>
<?rfc-ext include-index="no" ?>
<!--<?rfc strict="no"?> -->

<rfc category="std"
     ipr="trust200902"
     docName="draft-ietf-netconf-restconf-client-server-latest" >
    <front>
        <title>RESTCONF Client and Server Models</title>
        <author initials="K.W." surname="Watsen" fullname="Kent Watsen">
            <organization>Juniper Networks</organization>
            <address>
                <email>kwatsen@juniper.net</email>
            </address>
        </author>
        <author initials="G.W." surname="Wu" fullname="Gary Wu">
            <organization>Cisco Networks</organization>
            <address>
                <email>garywu@cisco.com</email>
            </address>
        </author>
        <date/>
        <area>Operations</area>
        <workgroup>NETCONF Working Group</workgroup>
        <abstract>
            <t>This document defines two YANG modules,
            one module to configure a RESTCONF client and the other module to
            configure a RESTCONF server.  Both modules support the TLS transport
            protocol with both standard RESTCONF and RESTCONF Call Home connections.</t>

        </abstract>
        <note title="Editorial Note (To be removed by RFC Editor)">
          <t>This draft contains many placeholder values that need to be replaced
          with finalized values at the time of publication.  This note summarizes
          all of the substitutions that are needed.  No other RFC Editor
          instructions are specified elsewhere in this document.</t>

          <t>This document contains references to other drafts in progress, both in
          the Normative References section, as well as in body text throughout.  
          Please update the following references to reflect their final RFC assignments:
            <list style="symbols">
              <t>I-D.ietf-netconf-keystore</t>
              <t>I-D.ietf-netconf-tls-client-server</t>
            </list>
          </t>
          <t>Artwork in this document contains shorthand references to drafts in 
          progress.  Please apply the following replacements:
            <list  style="symbols">
              <t><spanx style="verb">XXXX</spanx> --&gt; the assigned RFC value for this draft</t>
              <t><spanx style="verb">ZZZZ</spanx> --&gt; the assigned RFC value for I-D.ietf-netconf-tls-client-server</t>
            </list>
          </t>
          <t>Artwork in this document contains placeholder values for the date of publication of this
          draft.  Please apply the following replacement:
            <list  style="symbols">
              <t><spanx style="verb">YYYY-MM-DD</spanx> --&gt; the publication date of this draft</t>
            </list>
          </t>
          <t>The following Appendix section is to be removed prior to publication:
            <list  style="symbols">
              <t>Appendix A.  Change Log</t>
            </list>
          </t>
        </note>
    </front> <middle>

        <section title="Introduction">

            <t>This document defines two YANG <xref target="RFC7950"/> modules,
            one module to configure a RESTCONF client and the other module to
            configure a RESTCONF server <xref target="RFC8040"/>.
            Both modules support the TLS <xref target="RFC5246"/> transport
            protocol with both standard RESTCONF and RESTCONF Call Home connections
            <xref target="RFC8071"/>.</t>

            <section title="Terminology">
             <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
             NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
             "MAY", and "OPTIONAL" in this document are to be interpreted as
             described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/>
             when, and only when, they appear in all capitals, as shown here.</t>
            </section>
        </section>

        <section title="The RESTCONF Client Model">

        <t>The RESTCONF client model presented in this section supports both clients
        initiating connections to servers, as well as clients listening
        for connections from servers calling home.</t>

        <t>This model, like that presented in <xref target="I-D.ietf-netconf-netconf-client-server"/>,
        is designed to support any number of possible transports.  RESTCONF only supports the TLS
        transport currently, thus this model only supports the TLS transport.</t>

        <t>All private keys and trusted certificates are held in the
        keystore model defined in <xref target="I-D.ietf-netconf-keystore"/>.</t>

        <t>YANG feature statements are used to enable implementations to advertise
        which parts of the model the RESTCONF client supports.</t>

        <section title="Tree Diagram">
          <t>The following tree diagram <xref target="I-D.ietf-netmod-yang-tree-diagrams"/>
          provides an overview of the data model for the "ietf-restconf-client" module.
          Just the container is displayed below, but there is also a reuable grouping by
          the same name that the container is using.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ietf-restconf-client-tree.txt,69)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="Example Usage">
          <t>The following example illustrates configuring a RESTCONF
          client to initiate connections, as well as listening for call-home
          connections.</t>
          <t>This example is consistent with the examples presented in
          Section 2.2 of <xref target="I-D.ietf-netconf-keystore"/>.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ex-restconf-client.xml,69)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="YANG Module" anchor="ietf-restconf-client-module">
          <t>This YANG module imports YANG types from <xref
          target="RFC6991"/> and <xref target="RFC7407"/>,
          and groupings from <xref target="I-D.ietf-netconf-tls-client-server"/>.</t>
          <t>
            <figure>
              <artwork><![CDATA[
<CODE BEGINS> file "ietf-restconf-client@YYYY-MM-DD.yang"
INSERT_TEXT_FROM_FILE(ietf-restconf-client@YYYY-MM-DD.yang)
<CODE ENDS>
]]></artwork>
            </figure>
          </t>
        </section>
      </section>

      <section title="The RESTCONF Server Model">
        <t>The RESTCONF server model presented in this section supports servers
        both listening for connections as well as initiating call-home
        connections.</t>

        <t>All private keys and trusted certificates are held in the
        keystore model defined in <xref target="I-D.ietf-netconf-keystore"/>.</t>

        <t>YANG feature statements are used to enable implementations to advertise
        which parts of the model the RESTCONF server supports.</t>

        <section title="Tree Diagram">
          <t>The following tree diagram <xref target="I-D.ietf-netmod-yang-tree-diagrams"/>
          provides an overview of the data model for the "ietf-restconf-client" module.
          Just the container is displayed below, but there is also a reuable grouping by
          the same name that the container is using.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ietf-restconf-server-tree.txt,69)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="Example Usage">
          <t>The following example illustrates configuring a RESTCONF server
          to listen for RESTCONF client connections, as well as configuring
          call-home to one RESTCONF client.</t>

          <t>This example is consistent with the examples presented in
          Section 2.2 of <xref target="I-D.ietf-netconf-keystore"/>.</t>

          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ex-restconf-server.xml,69)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="YANG Module" anchor="restconf-yang-module">
          <t>This YANG module imports YANG types from <xref
          target="RFC6991"/> and <xref target="RFC7407"/>,
          and groupings from <xref target="I-D.ietf-netconf-tls-client-server"/>.</t>
          <t>
            <figure>
              <artwork><![CDATA[
<CODE BEGINS> file "ietf-restconf-server@YYYY-MM-DD.yang"
INSERT_TEXT_FROM_FILE(ietf-restconf-server@YYYY-MM-DD.yang)
<CODE ENDS>
]]></artwork>
            </figure>
          </t>
        </section>
      </section>

      <section title="Security Considerations">
        <t>The YANG module defined in this document uses a grouping defined in 
        <xref target="I-D.ietf-netconf-tls-client-server"/>.  Please see the Security Considerations
        section in that document for concerns related that grouping.</t>

        <t>The YANG module defined in this document is designed to be accessed via YANG
        based management protocols, such as NETCONF <xref target="RFC6241"/> and
        RESTCONF <xref target="RFC8040"/>.  Both of these protocols have mandatory-to-implement
        secure transport layers (e.g., SSH, TLS) with mutual authentication.</t>

        <t>The NETCONF access control model (NACM) <xref target="RFC6536"/> provides the means
        to restrict access for particular users to a pre-configured subset of all available
        protocol operations and content.</t>

        <t>There are a number of data nodes defined in this YANG module that are
        writable/creatable/deletable (i.e., config true, which is the default). These data
        nodes may be considered sensitive or vulnerable in some network environments. Write
        operations (e.g., edit-config) to these data nodes without proper protection can
        have a negative effect on network operations. These are the subtrees and data nodes
        and their sensitivity/vulnerability:
          <list style="hanging" hangIndent="6">
            <t hangText="   /:">The entire data trees defined by the modules defined in
              this draft are sensitive to write operations.  For instance, the addition or
              removal of references to keys, certificates, trusted anchors, etc., can
              dramatically alter the implemented security policy.  However, no NACM
              annotations are applied as the data SHOULD be editable by users other than
              a designated 'recovery session'.</t>
          </list>
        </t>

        <t>Some of the readable data nodes in this YANG module may be considered sensitive
        or vulnerable in some network environments. It is thus important to control read
        access (e.g., via get, get-config, or notification) to these data nodes. These are
        the subtrees and data nodes and their sensitivity/vulnerability:
          <list style="hanging" hangIndent="6">
            <t hangText="   NONE"></t>
          </list>
        </t>

        <t>Some of the RPC operations in this YANG module may be considered sensitive or
        vulnerable in some network environments. It is thus important to control access
        to these operations. These are the operations and their sensitivity/vulnerability:
          <list style="hanging" hangIndent="6">
            <t hangText="   NONE"></t>
          </list>
        </t>
      </section>

      <section title="IANA Considerations">
        <section title="The IETF XML Registry">
          <t>This document registers two URIs in the IETF XML
          registry <xref target="RFC3688"/>.  Following the format in
          <xref target="RFC3688"/>, the following registrations are
          requested:</t>
          <t>
            <figure>
                <artwork><![CDATA[
   URI: urn:ietf:params:xml:ns:yang:ietf-restconf-client
   Registrant Contact: The NETCONF WG of the IETF.
   XML: N/A, the requested URI is an XML namespace.

   URI: urn:ietf:params:xml:ns:yang:ietf-restconf-server
   Registrant Contact: The NETCONF WG of the IETF.
   XML: N/A, the requested URI is an XML namespace.
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="The YANG Module Names Registry">
          <t>This document registers two YANG modules in the
          YANG Module Names registry <xref target="RFC7950"/>.
          Following the format in <xref target="RFC7950"/>, the
          the following registrations are requested:</t>
          <t>
            <figure>
                <artwork><![CDATA[
   name:         ietf-restconf-client
   namespace:    urn:ietf:params:xml:ns:yang:ietf-restconf-client
   prefix:       ncc
   reference:    RFC XXXX

   name:         ietf-restconf-server
   namespace:    urn:ietf:params:xml:ns:yang:ietf-restconf-server
   prefix:       ncs
   reference:    RFC XXXX
]]></artwork>
            </figure>
          </t>
        </section>

      </section>


      <section title="Acknowledgements">
        <t>The authors would like to thank for following for
        lively discussions on list and in the halls (ordered
        by last name): Andy Bierman, Martin Bjorklund, Benoit Claise,
        Mehmet Ersue, Balázs Kovács, David Lamparter, Alan Luchuk, Ladislav Lhotka,
        Radek Krejci, Tom Petch, Juergen Schoenwaelder, Phil Shafer, Sean Turner, and
        Bert Wijnen.</t>
     </section>

    </middle>

    <back>
      <references title="Normative References">
        <?rfc include="reference.RFC.2119.xml"?>
        <?rfc include="reference.RFC.6991.xml"?>
        <?rfc include="reference.RFC.7407.xml"?>
        <?rfc include="reference.RFC.7950.xml"?>
        <?rfc include="reference.RFC.8040.xml"?>
        <?rfc include="reference.RFC.8071.xml"?>
        <?rfc include="reference.RFC.8174.xml"?>
        <?rfc include="reference.I-D.ietf-netconf-keystore"?>
        <?rfc include="reference.I-D.ietf-netconf-tls-client-server"?>
     </references>

      <references title="Informative References">
        <?rfc include="reference.RFC.3688.xml"?>
        <?rfc include="reference.RFC.5246.xml"?>
        <?rfc include="reference.RFC.6241.xml"?>
        <?rfc include="reference.RFC.6536.xml"?>
        <?rfc include="reference.I-D.ietf-netconf-netconf-client-server"?>
        <?rfc include="reference.I-D.ietf-netmod-yang-tree-diagrams"?>
      </references>

     <section title="Change Log">
        <section title="00 to 01">
          <t>
            <list style="symbols">
              <t>Renamed "keychain" to "keystore".</t>
            </list>
          </t>
        </section>
        <section title="01 to 02">
          <t>
            <list style="symbols">
              <t>Filled in previously missing 'ietf-restconf-client' module.</t>
              <t>Updated the ietf-restconf-server module to accomodate new
              grouping 'ietf-tls-server-grouping'.</t>
            </list>
          </t>
        </section>
        <section title="02 to 03">
          <t>
            <list style="symbols">
              <t>Refined use of tls-client-grouping to add a must statement
                 indicating that the TLS client must specify a client-certificate.</t>
              <t>Changed restconf-client??? to be a grouping (not a container).</t>
            </list>
          </t>
        </section>
        <section title="03 to 04">
          <t>
            <list style="symbols">
              <t>Added RFC 8174 to Requirements Language Section.</t>
              <t>Replaced refine statement in ietf-restconf-client
                 to add a mandatory true.</t>
              <t>Added refine statement in ietf-restconf-server
                 to add a must statement.</t>
              <t>Now there are containers and groupings, for both the
                 client and server models.</t>
              <t>Now tree diagrams reference ietf-netmod-yang-tree-diagrams</t>
              <t>Updated examples to inline key and certificates (no longer 
                 a leafref to keystore)</t>
            </list>
          </t>
        </section>
     </section>
   </back>
</rfc>

